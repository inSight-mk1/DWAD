# DWAD股票投机分析决策系统 - 产品需求文档

## 1. 产品概述

DWAD（Do-Win Analysis & Decision）是一个基于掘金量化平台的股票投机分析决策系统，主要用于股池管理、板块指数制作和概念强弱分析。

### 1.1 核心价值
- 弥补掘金平台在行业、概念、板块细分指数的不足
- 提供自定义股池的板块指数制作能力
- 为投资决策提供可视化的概念强弱对比分析

## 2. 功能需求

### 2.1 数据管理模块

#### 2.1.1 股池管理
- **股池分类**：
  - 大概念股池：包含各类热门概念股票
  - 重点关注股池：用户特别关注的股票池
  - 持仓股池：当前持有的股票池
- **股池结构**：每个股池包含股票中文名列表，按概念分组
- **股池配置**：支持导入、编辑、删除股池及其概念分组

#### 2.1.2 行情数据库
- **数据源**：掘金量化平台API
- **存储策略**：
  - 初始建库：设定起始时间点，批量获取历史行情数据
  - 增量更新：每日定时更新当日行情数据
- **数据字段**：开盘价、收盘价、最高价、最低价、成交量、成交额、市值等
- **数据完整性**：确保数据连续性，处理停牌、除权除息、新股上市、退市等特殊情况

### 2.2 指数制作模块

#### 2.2.1 板块指数计算
- **市值加权指数**：根据各股票市值权重计算板块综合指数
- **平均股价指数**：计算股池内股票平均价格变化
- **基期设定**：支持自定义基期，归一化指数基点
- **实时更新**：配合数据更新自动刷新指数

#### 2.2.2 指数存储
- 保存历史指数数据，支持快速查询
- 支持绘制折线图，叠加多指数显示、强弱排名显示等

### 2.3 分析比较模块

#### 2.3.1 概念强弱分析
- **同类对比**：同一股池类别内不同概念的强弱比较
- **跨类对比**：同一概念在不同股池类别间的表现比较
- **时间段分析**：支持自定义时间区间的强弱分析
- **排名功能**：按涨跌幅、累计收益等指标排序

#### 2.3.2 可视化分析
- **趋势图表**：多概念指数在同一图表中的走势对比
- **热力图**：概念强弱的热力图展示
- **统计图表**：收益分布、波动率等统计指标图表
- **导出功能**：支持图表和数据导出

## 3. 技术需求

### 3.1 数据存储
- **评估方案**：
  - 文件存储：CSV/Parquet格式，适合批量读写
  - 数据库存储：SQLite/PostgreSQL，支持复杂查询
- **选型原则**：考虑数据量、查询复杂度、维护成本

### 3.2 数据获取
- 设计统一的数据获取接口类
- 支持批量获取和增量更新
- 错误处理和重试机制
- 数据校验和清洗

### 3.3 性能要求
- 初始建库时间暂无时间要求，主要依赖掘金API的访问限制
- 每日数据更新和指数更新尽量在10分钟内处理完成
- 渲染数据图表较快，准实时显示

## 4. 用户体验设计

### 4.1 操作流程
1. **初始化**：导入股池配置，执行初始建库
2. **日常使用**：自动更新数据，查看分析结果
3. **自定义分析**：选择时间段和对比概念，生成报告

### 4.2 界面要求
- 无交互界面，主要为CLI程序
- 输出图标以简洁、信息量为原则

## 5. 扩展性考虑

### 5.1 数据源扩展
- 预留其他数据源接入能力
- 支持多数据源数据融合

### 5.2 分析功能扩展
- 预留更多技术指标计算
- 支持自定义分析算法
- 机器学习模型集成接口

### 5.3 部署扩展
- 支持本地部署和云端部署
- 考虑多用户使用场景

## 6. 风险与限制

### 6.1 数据风险
- 数据源稳定性依赖掘金平台
- 需处理数据延迟和缺失问题

### 6.2 技术风险
- API调用频率限制
- 大数据量处理性能挑战

### 6.3 合规风险
- 确保数据使用符合相关法规
- 投资建议免责声明